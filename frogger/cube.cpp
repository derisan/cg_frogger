#include "cube.h"

#include <GL/glew.h>

#include "vertexarray.h"

Cube::Cube(Game* game)
	: Object{ game },
    mVertexArray{ nullptr }
{
    Load();
}

Cube::~Cube()
{
	delete mVertexArray;
}

void Cube::UpdateObject()
{
    Object::UpdateObject();
}

void Cube::Draw(Shader* shader)
{
	Object::Draw(shader);

	mVertexArray->SetActive();
	glDrawArrays(GL_TRIANGLES, 0, 36);
}

void Cube::Load()
{
    const float vertices[] = {
        // pos                // norm
        -0.5f,  0.0f, -0.5f,  0.0f,  0.0f, -1.0f,
         0.5f,  0.0f, -0.5f,  0.0f,  0.0f, -1.0f,
         0.5f,  1.0f, -0.5f,  0.0f,  0.0f, -1.0f,
         0.5f,  1.0f, -0.5f,  0.0f,  0.0f, -1.0f,
        -0.5f,  1.0f, -0.5f,  0.0f,  0.0f, -1.0f,
        -0.5f,  0.0f, -0.5f,  0.0f,  0.0f, -1.0f,

        -0.5f,  0.0f,  0.5f,  0.0f,  0.0f,  1.0f,
         0.5f,  0.0f,  0.5f,  0.0f,  0.0f,  1.0f,
         0.5f,  1.0f,  0.5f,  0.0f,  0.0f,  1.0f,
         0.5f,  1.0f,  0.5f,  0.0f,  0.0f,  1.0f,
        -0.5f,  1.0f,  0.5f,  0.0f,  0.0f,  1.0f,
        -0.5f,  0.0f,  0.5f,  0.0f,  0.0f,  1.0f,

        -0.5f,  1.0f,  0.5f, -1.0f,  0.0f,  0.0f,
        -0.5f,  1.0f, -0.5f, -1.0f,  0.0f,  0.0f,
        -0.5f,  0.0f, -0.5f, -1.0f,  0.0f,  0.0f,
        -0.5f,  0.0f, -0.5f, -1.0f,  0.0f,  0.0f,
        -0.5f,  0.0f,  0.5f, -1.0f,  0.0f,  0.0f,
        -0.5f,  1.0f,  0.5f, -1.0f,  0.0f,  0.0f,

         0.5f,  1.0f,  0.5f,  1.0f,  0.0f,  0.0f,
         0.5f,  1.0f, -0.5f,  1.0f,  0.0f,  0.0f,
         0.5f,  0.0f, -0.5f,  1.0f,  0.0f,  0.0f,
         0.5f,  0.0f, -0.5f,  1.0f,  0.0f,  0.0f,
         0.5f,  0.0f,  0.5f,  1.0f,  0.0f,  0.0f,
         0.5f,  1.0f,  0.5f,  1.0f,  0.0f,  0.0f,

        -0.5f,  0.0f, -0.5f,  0.0f, -1.0f,  0.0f,
         0.5f,  0.0f, -0.5f,  0.0f, -1.0f,  0.0f,
         0.5f,  0.0f,  0.5f,  0.0f, -1.0f,  0.0f,
         0.5f,  0.0f,  0.5f,  0.0f, -1.0f,  0.0f,
        -0.5f,  0.0f,  0.5f,  0.0f, -1.0f,  0.0f,
        -0.5f,  0.0f, -0.5f,  0.0f, -1.0f,  0.0f,

        -0.5f,  1.0f, -0.5f,  0.0f,  1.0f,  0.0f,
         0.5f,  1.0f, -0.5f,  0.0f,  1.0f,  0.0f,
         0.5f,  1.0f,  0.5f,  0.0f,  1.0f,  0.0f,
         0.5f,  1.0f,  0.5f,  0.0f,  1.0f,  0.0f,
        -0.5f,  1.0f,  0.5f,  0.0f,  1.0f,  0.0f,
        -0.5f,  1.0f, -0.5f,  0.0f,  1.0f,  0.0f
    };

    mVertexArray = new VertexArray{ vertices, static_cast<unsigned int>(sizeof(vertices) / sizeof(float)) };
}

//const float vertices[] = {
//    // pos                // norm
//    -0.5f, -0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//     0.5f, -0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//     0.5f,  0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//     0.5f,  0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//    -0.5f,  0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//    -0.5f, -0.5f, -0.5f,  0.0f,  0.0f, -1.0f,
//
//    -0.5f, -0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//     0.5f, -0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//     0.5f,  0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//     0.5f,  0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//    -0.5f,  0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//    -0.5f, -0.5f,  0.5f,  0.0f,  0.0f,  1.0f,
//
//    -0.5f,  0.5f,  0.5f, -1.0f,  0.0f,  0.0f,
//    -0.5f,  0.5f, -0.5f, -1.0f,  0.0f,  0.0f,
//    -0.5f, -0.5f, -0.5f, -1.0f,  0.0f,  0.0f,
//    -0.5f, -0.5f, -0.5f, -1.0f,  0.0f,  0.0f,
//    -0.5f, -0.5f,  0.5f, -1.0f,  0.0f,  0.0f,
//    -0.5f,  0.5f,  0.5f, -1.0f,  0.0f,  0.0f,
//
//     0.5f,  0.5f,  0.5f,  1.0f,  0.0f,  0.0f,
//     0.5f,  0.5f, -0.5f,  1.0f,  0.0f,  0.0f,
//     0.5f, -0.5f, -0.5f,  1.0f,  0.0f,  0.0f,
//     0.5f, -0.5f, -0.5f,  1.0f,  0.0f,  0.0f,
//     0.5f, -0.5f,  0.5f,  1.0f,  0.0f,  0.0f,
//     0.5f,  0.5f,  0.5f,  1.0f,  0.0f,  0.0f,
//
//    -0.5f, -0.5f, -0.5f,  0.0f, -1.0f,  0.0f,
//     0.5f, -0.5f, -0.5f,  0.0f, -1.0f,  0.0f,
//     0.5f, -0.5f,  0.5f,  0.0f, -1.0f,  0.0f,
//     0.5f, -0.5f,  0.5f,  0.0f, -1.0f,  0.0f,
//    -0.5f, -0.5f,  0.5f,  0.0f, -1.0f,  0.0f,
//    -0.5f, -0.5f, -0.5f,  0.0f, -1.0f,  0.0f,
//
//    -0.5f,  0.5f, -0.5f,  0.0f,  1.0f,  0.0f,
//     0.5f,  0.5f, -0.5f,  0.0f,  1.0f,  0.0f,
//     0.5f,  0.5f,  0.5f,  0.0f,  1.0f,  0.0f,
//     0.5f,  0.5f,  0.5f,  0.0f,  1.0f,  0.0f,
//    -0.5f,  0.5f,  0.5f,  0.0f,  1.0f,  0.0f,
//    -0.5f,  0.5f, -0.5f,  0.0f,  1.0f,  0.0f
//};